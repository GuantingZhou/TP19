!function(){"use strict";var a;a=()=>{const a=document.querySelectorAll(".wp-block-themeisle-blocks-popup");a.length&&a.forEach(a=>new class{constructor(a){this.element=a,this.happened=!1,this.storageKey="otter-popup-dismiss";const{dismiss:b,anchor:c}=a.dataset;if(this.isItemDismissed()&&b&&!c&&!Boolean(window.themeisleGutenberg.isPreview))return!1;this.init()}init(){this.bindOpen(),this.bindClose()}openModal(){this.element.classList.add("active"),this.happened=!0}closeModal(){this.element.classList.remove("active"),this.dismissModal()}dismissModal(){const{dismiss:b,anchor:d}=this.element.dataset,{id:a}=this.element;if(!b||!a||d)return!1;const e=new Date,c=JSON.parse(localStorage.getItem(this.storageKey))||[];if(c.some(b=>b.modalID===a))return!1;const f=864e5*b,g={expiry:e.getTime()+f,modalID:a};localStorage.setItem(this.storageKey,JSON.stringify([...c,g]))}isItemDismissed(){const{id:c}=this.element,b=JSON.parse(localStorage.getItem(this.storageKey))||[],a=b.filter(a=>a.modalID===c);if(0===a.length)return!1;const d=a[0],e=new Date;if(d.expiry>e.getTime())return!0;const f=b.filter(b=>b!==a[0]);return localStorage.setItem(this.storageKey,JSON.stringify(f)),!1}bindOpen(){const{open:a}=this.element.dataset;switch(a){case"onClick":this.bindAnchors();break;case"onScroll":this.bindOpenAfterScroll();break;case"onExit":this.bindExitIntent();break;default:this.bindOnLoad()}}bindAnchors(){const{anchor:a}=this.element.dataset;if(!a)return!1;document.querySelectorAll(`a[href='#${a}']`).forEach(a=>{a.addEventListener("click",a=>{a.preventDefault(),this.openModal()})})}bindOpenAfterScroll(){window.document.addEventListener("scroll",()=>{if(this.happened)return!1;const{offset:a}=this.element.dataset;if(parseInt(a)>=parseInt(this.getScrolledPercent()))return!1;this.openModal()})}bindOnLoad(){const{time:a}=this.element.dataset;setTimeout(()=>{this.openModal()},1e3*a)}bindExitIntent(){document.body.addEventListener("mouseleave",a=>{if(this.happened)return!1;0>a.clientY&&this.openModal()})}getScrolledPercent(){const a=document.documentElement,{body:b}=document,c="scrollTop",d="scrollHeight";return(a[c]||b[c])/((a[d]||b[d])-a.clientHeight)*100}bindClose(){this.bindCloseButtons(),this.bindAnchorClose(),this.bindOverlayClosing()}bindAnchorClose(){const{anchorclose:a}=this.element.dataset;if(!a)return!1;document.querySelectorAll(`a[href='#${a}']`).forEach(a=>{a.addEventListener("click",a=>{a.preventDefault(),this.closeModal()})})}bindCloseButtons(){this.element.querySelectorAll(".otter-popup__modal_header .components-button").forEach(a=>{a.addEventListener("click",()=>{this.closeModal()})})}bindOverlayClosing(){const{outside:a}=this.element.dataset;if(!a)return!1;this.element.querySelector(".otter-popup__modal_wrap_overlay").addEventListener("click",()=>{this.closeModal()})}}(a))},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",a):a())}()